<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-04-11 Tue 00:20 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Org-mode Babel使用示例</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Bliss Chung" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>

    <meta name="viewport" content="width=device-width, initial-scale=1">



    <script type='text/javascript' src='http://3zso.com/assets/js/vendor/modernizr.custom.js'></script>
    <script type='text/javascript' src='http://3zso.com/js/jquery/jquery.js'></script>
    <script type='text/javascript' src='http://3zso.com/js/jquery/jquery-migrate.min.js'></script>

<!--[if lt IE 10]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://3zso.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->


    <!--[if lt IE 9]>
        <script src="http://3zso.com/assets/js/vendor/respond.min.js"></script>
        <![endif]-->
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">

</div><!-- preamble end -->
 
   <div class="layout-reverse theme-base-03">
     <div class="sidebar">
       
       <div style="max-width: 38rem; padding-left: 1rem; padding-right: 1rem;">
         <div class="side-about">
 
           <h2>
             <a title="3zso.com" alt="3zso.com" href="/">
               <img alt="3ZSO" src="http://3zso.com/frm/logo/3zso-logo-128-h.svg" height="48" class="center-block">
             </a>
             <hr style="border:1px gray solid;">
             <a href="/">雪往北飘</a></h2>
           <p class="lead">博客、编码、架构、自我完善、GTD！</p>
         </div>
 
         <nav class="sidebar-nav" style="font-size: 20px;">
           <br >
           <a class="sidebar-nav-item " href="http://3zso.com">Home</a>
           <a class="sidebar-nav-item active" href="http://archive.3zso.com">Archive</a>
           <a class="sidebar-nav-item " href="http://source.3zso.com">Source</a>
         </nav>
 
         <div class="sidebar-sticky" style="max-width: 38rem; padding-left: 1rem; padding-right: 1rem;">
           <hr />
           <div class="sidebar-author">
             <h1>Bliss Chung <br><small>bliss@3zso.com</small></h1>
             <a href="https://github.com/zlz3907"><i class="fa fa-github"></i></a>
             <a href="https://twitter.com/zlz3907"><i class="fa fa-twitter"></i></a>
             <a href="mailto:bliss@3zso.com"><i class="fa fa-envelope"></i></a>
           </div>
         </div> <!-- end of class container sidebar-sticky-->
       </div>
     </div>

     <div class="content container">
      <aside class="site__banner">
        <div class="container">
          <div class="row">
            <div class="text-right">
              <p class="tagline">Bliss Chung. C<span>st.</span> 2014-02-18 Tue 15:42.<br />
                 <a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.1.1 (<a href="http://orgmode.org">Org</a> mode 9.0.5)</p>
            </div>
            <div class="col-xs-12 col-sm-5 col-sm-pull-6">
              <p></p>
            </div>
          </div><!-- .row -->
        </div><!-- .container -->
      </aside><!-- .site__banner.hidden-xs -->

<!--main class="site__content" role="main"-->
<div id="post">
<!-- hidden preamble -->
<div style="display:none">
</div>
<div id="content">
<h1 class="title">Org-mode Babel使用示例</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org39562bb">Babel介绍</a></li>
<li><a href="#org75cc8c3">插入示例文本块的基本操作</a></li>
<li><a href="#org7758f6d">部分语言代码片断在Org-mode里的使用示例</a></li>
</ul>
</div>
</div>

<div id="outline-container-org39562bb" class="outline-2">
<h2 id="org39562bb">Babel介绍</h2>
<div class="outline-text-2" id="text-org39562bb">
<p>
简单的说Babel可以让许多不同的语言一起工作，它可以执行不同语言的代码
块，org-mode可以导出HTML样式的代码也可以将执行结果显示出来。
</p>

<p>
要想在org-mode文件里执行其他程序语言的片断，需要在 <code>.emacs</code> 里加入如下配置：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #c5c8c6;">(</span>org-babel-do-load-languages
      'org-babel-load-languages
      '<span style="color: #8abeb7;">(</span><span style="color: #f0c674;">(</span>emacs-lisp . t<span style="color: #f0c674;">)</span>
        <span style="color: #f0c674;">(</span>ruby . t<span style="color: #f0c674;">)</span>
        <span style="color: #f0c674;">(</span>ditaa . t<span style="color: #f0c674;">)</span>
        <span style="color: #f0c674;">(</span>python . t<span style="color: #f0c674;">)</span>
        <span style="color: #f0c674;">(</span>sh . t<span style="color: #f0c674;">)</span>
        <span style="color: #f0c674;">(</span>latex . t<span style="color: #f0c674;">)</span>
        <span style="color: #f0c674;">(</span>plantuml . t<span style="color: #f0c674;">)</span>
        <span style="color: #f0c674;">(</span>R . t<span style="color: #f0c674;">)</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<p>
如果只是临时使用，可以在 <code>scratch</code> 里粘贴上面的代码，然后将光标移动
到最后一行的括号后面，然后按 <code>C-x C-e</code> 执行代码就可以了。上面的列表
中如果有不需要的语言，可以直接把对应的列表元素删除就行了。
</p>
</div>
</div>

<div id="outline-container-org75cc8c3" class="outline-2">
<h2 id="org75cc8c3">插入示例文本块的基本操作</h2>
<div class="outline-text-2" id="text-org75cc8c3">
</div><ul class="org-ul"><li><a id="orgf94e1a7"></a>最简单插入示例文本的方法<br /><div class="outline-text-3" id="text-orgf94e1a7">
<p>
直接在工作区输入 <code>&lt;e</code> 然后按 <code>TAB</code> 键，系统会生成如下模板：
</p>
<pre class="example">
#+BEGIN_EXAMPLE
这里可以写一些示例内容的文本。
#+END_EXAMPLE
</pre>

<p>
导出为html后的效果如下：
</p>
<pre class="example">
   这里可以写一些示例内容的文本。
</pre>

<p>
其实也可以直接输入 <code>:</code> 加空格，然后再输入示例文本：
</p>
<pre class="example">
: 直接在这里写示例内容，导出后效果和上面的一样！
</pre>

<p>
如果要插入源码可以输入 <code>&lt;s</code> 然后按 <code>TAB</code> 键，然后在模板第一行加上<a href="http://orgmode.org/worg/org-contrib/babel/languages.html">语言名称</a>：
</p>
<pre class="example">
#+BEGIN_SRC emacs-lisp
 (defun org-xor (a b)
   "Exclusive or."
   (if a (not b) b))
#+END_SRC
</pre>

<p>
如果要显示行号可以在第一行后再加上 <code>-n -r</code> ，如下显示：
</p>
<pre class="example">
#+BEGIN_SRC emacs-lisp -n -r
   (save-excursion                  (ref:sc)
      (goto-char (point-min))       (ref:jump)
#+END_SRC
</pre>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span id="coderef-sc" class="coderef-off"><span class="linenr">1: </span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68; font-weight: bold;">save-excursion</span></span>
<span id="coderef-jump" class="coderef-off"><span class="linenr">2: </span>   <span style="color: #8abeb7;">(</span>goto-char <span style="color: #f0c674;">(</span>point-min<span style="color: #f0c674;">)</span><span style="color: #8abeb7;">)</span></span>
</pre>
</div>
<p>
上面的例子中，在第<a href="#coderef-sc" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-sc');" onmouseout="CodeHighlightOff(this, 'coderef-sc');">1</a>行的位置记录了一个标识，可以在这里点击链接<a href="#coderef-jump" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-jump');" onmouseout="CodeHighlightOff(this, 'coderef-jump');">Line 2</a>跳转到对应的代码行上。
</p>
<pre class="example">
In line [[(sc)]] we remember the current position.  [[(jump)][Line (jump)]] jumps to point-min.
</pre>

<p>
示例文本区域的样式及承载文本的容器，可以通过 <code>#+ATTR_HTML:</code> 来设置：
</p>
<pre class="example">
#+ATTR_HTML: :textarea t :width 40
#+BEGIN_EXAMPLE
     (defun org-xor (a b)
        "Exclusive or."
        (if a (not b) b))
#+END_EXAMPLE
</pre>

<p>
<textarea cols="74" rows="3">
(defun org-xor (a b)
  "Exclusive or."
  (if a (not b) b))
</textarea>
</p>

<p>
参考：<a href="http://orgmode.org/manual/Literal-examples.html">http://orgmode.org/manual/Literal-examples.html</a>
</p>
</div></li>

<li><a id="org62a2ea7"></a>简单模板对应快捷输入的首字母<br /><div class="outline-text-3" id="text-org62a2ea7">
<p>
输入 <code>&lt;</code> 后面跟一个字母，然后按 <code>TAB</code> 键，就可以生成对应的模板。（eg: <code>&lt;e + TAB</code> ）
</p>
<pre class="example">
s	#+BEGIN_SRC ... #+END_SRC
e	#+BEGIN_EXAMPLE ... #+END_EXAMPLE
q	#+BEGIN_QUOTE ... #+END_QUOTE
v	#+BEGIN_VERSE ... #+END_VERSE
c	#+BEGIN_CENTER ... #+END_CENTER
l	#+BEGIN_LaTeX ... #+END_LaTeX
L	#+LaTeX:
h	#+BEGIN_HTML ... #+END_HTML
H	#+HTML:
a	#+BEGIN_ASCII ... #+END_ASCII
A	#+ASCII:
i	#+INDEX: line
I	#+INCLUDE: line
</pre>

<p>
参考：<a href="http://orgmode.org/manual/Easy-Templates.html#Easy-Templates">http://orgmode.org/manual/Easy-Templates.html#Easy-Templates</a>
</p>
</div></li></ul>
</div>

<div id="outline-container-org7758f6d" class="outline-2">
<h2 id="org7758f6d">部分语言代码片断在Org-mode里的使用示例</h2>
<div class="outline-text-2" id="text-org7758f6d">
<p>
<b>Org-mode Babel支持的语言可以参看<a href="http://orgmode.org/worg/org-contrib/babel/languages.html">Bable: Languages</a></b>
</p>
</div>
<ul class="org-ul"><li><a id="orgaa53157"></a>Ruby<br /><div class="outline-text-3" id="text-orgaa53157">
<p>
在org-mode文件里的代码：
</p>
<pre class="example">
#+begin_src ruby
require 'date'
"This file was last evaluated on #{Date.today}"
#+end_src
</pre>

<p>
将光标移动到上面的代码块里，按 <code>C-c ’</code> 就可以在一个单独的 <code>Buffer</code>
中编辑代码了。如果按 <code>C-c C-c</code> 就可以直接将代码的执行结果插入到
org-mode文件里。
</p>

<pre class="example">
This file was last evaluated on 2014-01-02
</pre>

<p>
导出到HTML里为：
</p>
<div class="org-src-container">
<pre class="src src-ruby"><span style="color: #b294bb;">require</span> <span style="color: #8abeb7;">'date'</span>
<span style="color: #8abeb7;">"This file was last evaluated on </span><span style="color: #f0c674; font-weight: bold;">#{Date.today}</span><span style="color: #8abeb7;">"</span>
</pre>
</div>

<p>
如果想把代码执行的结果导出到HTML里可以使用如下代码：
</p>
<pre class="example">
#+begin_src ruby :exports results
require 'date'
"This file was last evaluated on #{Date.today}"
#+end_src
</pre>

<p>
导出结果：
</p>
<pre class="example">
This file was last evaluated on 2017-04-11
</pre>
</div></li>

<li><a id="org26f00a5"></a>Ditaa<br /><div class="outline-text-3" id="text-org26f00a5">
<p>
<a href="http://ditaa.sourceforge.net/">Ditaa</a> 是用Java写的一个小（但很强大）程序，它可以将ASCII字符转换成图形。
</p>

<pre class="example">
#+begin_src ditaa :file ../img/orgmode-babel-ditaa1.png :cmdline -r
+---------+
| cBLU    |
|         |
|    +----+
|    |cPNK|
|    |    |
+----+----+
#+end_src
</pre>


<div class="figure">
<p><img src="../img/orgmode-babel-ditaa1.png" alt="orgmode-babel-ditaa1.png" />
</p>
</div>

<pre class="example">
#+BEGIN_SRC ditaa :file :file ../img/orgmode-babel-ditaa2.png :cmdline -r
      +--------+   +-------+    +-------+
      |        | --+ ditaa +--&gt; |       |
      |  Text  |   +-------+    |diagram|
      |Document|   |!magic!|    |       |
      |     {d}|   |       |    |       |
      +---+----+   +-------+    +-------+
          :                         ^
          |       Lots of work      |
          +-------------------------+
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/orgmode-babel-ditaa2.png" alt="orgmode-babel-ditaa2.png" />
</p>
</div>

<pre class="example">
#+BEGIN_SRC ditaa :file ../img/orgmode-babel-ditaa3.png :cmdline -r
  /-------------+-------------\
  |cRED RED     |cBLU BLU     |
  +-------------+-------------+
  |cGRE GRE     |cPNK PNK     |
  +-------------+-------------+
  |cBLK BLK     |cYEL YEL     |
  \-------------+-------------/
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/orgmode-babel-ditaa3.png" alt="orgmode-babel-ditaa3.png" />
</p>
</div>
</div></li>

<li><a id="orge69ed5d"></a>Latex<br /><div class="outline-text-3" id="text-orge69ed5d">
<p>
使用latex编写公式：
</p>

<pre class="example">
#+begin_src latex :file ../img/orgmode-babel-latex.png :exports results
  \begin{equation}
  \Pr(X_t=j|X_{t-1}=i) = \frac{j(j-1)}{2}\Big(\frac{i}{N}\Big)^j\Big(\frac{N-i}{N}\Big)^{n-j}
  \end{equation}
#+end_src
</pre>


<div class="figure">
<p><img src="../img/orgmode-babel-latex.png" alt="orgmode-babel-latex.png" />
</p>
</div>
</div></li>

<li><a id="org434914a"></a>R<br /><div class="outline-text-3" id="text-org434914a">
<p>
R内置多种统计学及数字分析功能。R的功能也可以通过安装包（Packages，
用户撰写的功能）增强。因为S的血缘，R比其他统计学或数学专用的编程语
言有更强的面向对象（面向对象程序设计）功能。R的另一强项是绘图功能，
制图具有印刷的素质，也可加入数学符号。
</p>

<pre class="example">
#+name: simpledrift(N=1000, X1=600, ngens=100)
#+begin_src R :file ../img/orgmode-babel-R1.png :var ngens=100 X1=600 N=1000 :results graphics
  p &lt;- numeric(ngens)
  p[1] &lt;- X1/N
  for(g in 2:ngens)
      p[g] &lt;- rbinom(1, size=N, prob=p[g-1]) / N
  plot(p, type="l", ylim=c(0,1), xlab="Generation", ylab="Proportion red")
#+end_src
</pre>


<div class="figure">
<p><img src="../img/orgmode-babel-R1.png" alt="orgmode-babel-R1.png" />
</p>
</div>
</div></li>

<li><a id="org3a47a2a"></a>PlantUML<br /><div class="outline-text-3" id="text-org3a47a2a">
<p>
PlantUML是一个快速创建UML图形的组件，官网上之所以称它是一个组件，我
想主要是因为多数情况下我们都是在Eclipse、NetBenas、Intellijidea、
Emacs、Word等软件里来使用PlantUML（<a href="http://www.plantuml.com/running.html">参看各软件相关配置</a>）。
</p>

<p>
PlantUML支持的图形有：
</p>
<ul class="org-ul">
<li>sequence diagram,</li>
<li>use case diagram,</li>
<li>class diagram,</li>
<li>activity diagram (here is the new syntax),</li>
<li>component diagram,</li>
<li>state diagram,</li>
<li>object diagram,</li>
<li>wireframe graphical interface</li>
</ul>

<p>
PlantUML通过简单和直观的语言来定义图形，它可以生成PNG、SVG和二进制
图片。下面是一个简单的示例：
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/orgmode-babel-sequenceuml.png
  Alice -&gt; Bob: synchronous call
  Alice -&gt;&gt; Bob: asynchronous call
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/orgmode-babel-sequenceuml.png" alt="orgmode-babel-sequenceuml.png" />
</p>
</div>

<p>
在官网上有一个简单的<a href="http://www.plantuml.com/plantuml/">在线Demo服务</a>， 有兴趣的朋友可以上去看下。
</p>
</div>

<ul class="org-ul"><li><a id="org3338d59"></a>在Emacs里配置PlantUML（参考：<a href="http://www.plantuml.com/emacs.html">Run it from Emacs</a>）<br /><div class="outline-text-4" id="text-org3338d59">
<ol class="org-ol">
<li>下载 <code>plantuml.jar</code> 到你的硬盘上（<a href="http://www.plantuml.com/download.html">官网下载页面</a>）</li>
<li><p>
安装生成图片用的软件<a href="http://www.plantuml.com/graphvizdot.html">Graphviz</a>
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #969896; font-style: italic;">## </span><span style="color: #969896; font-style: italic;">&#22914;&#26524;&#26159;Ubuntu&#31995;&#32479;&#65292;&#21487;&#20197;&#30452;&#25509;&#36816;&#34892;&#19979;&#38754;&#30340;&#21629;&#20196;&#23433;&#35013;</span>
sudo apt-get install graphviz
</pre>
</div></li>
<li><p>
在 <code>.emacs</code> 里添加Org-mode配置，把 <code>plantuml</code> 添加到
<code>org-babel-load-languages</code> 里。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">active Org-babel languages</span>
<span style="color: #c5c8c6;">(</span>org-babel-do-load-languages
 'org-babel-load-languages
 '<span style="color: #8abeb7;">(</span><span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">other Babel languages</span>
   <span style="color: #f0c674;">(</span>plantuml . t<span style="color: #f0c674;">)</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<p>
然后把刚下载到的 <code>plantuml.jar</code> 文件的存放路径也添加到 <code>.emacs</code>
文件中。
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68; font-weight: bold;">setq</span> org-plantuml-jar-path
      <span style="color: #8abeb7;">(</span>expand-file-name <span style="color: #8abeb7;">"~/path/to/plantuml.jar"</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div></li>
</ol>

<p>
重启Emacs，复制上面的代码试一下吧！
</p>
</div></li></ul></li>
<li><a id="org6ceae3a"></a>STARTED 运行带参数的代码块<br /><div class="outline-text-3" id="text-org6ceae3a">
<pre class="example">
#+name: square
#+header: :var x=0
#+begin_src python
  return x*x
#+end_src

#+RESULTS: square
: 0

#+CALL: square(x=6)

#+RESULTS:
: 36

#+NAME: directories
#+begin_src sh :results replace
  cd ~/.emacs.d/ &amp;&amp; du -sc *.el |grep -v total
#+end_src

#+name: directory-pie-chart(dirs=directories)
#+begin_src R :file ../img/orgmode-babel-Rdirs.png :var dirs=directories :results graphics
  pie(dirs[,1], labels = dirs[,2])
#+end_src
</pre>


<div class="figure">
<p><img src="../img/orgmode-babel-Rdirs.png" alt="orgmode-babel-Rdirs.png" />
</p>
</div>

<pre class="example">
#+HEADERS: :var data1=1
#+BEGIN_SRC emacs-lisp :var data2=2
  (message "data1:%S, duata2:%S" data1 data2)
#+END_SRC

#+RESULTS:
: data1:1, duata2:2
</pre>
</div></li></ul>
</div>
</div>
<div id="postamble" class="status">

</div><!-- postamble end -->

</div>

<div class="callout-quote animation is-animated">
<div id="disqus_thread" class="container"></div>
<script type="text/javascript">
    var disqus_shortname = '3zso';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<!--
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a> -->
</div>


 <div style="clear:both;"></div>
  
 <!-- Latest compiled and minified CSS -->
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  
 <!-- Optional theme
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
      -->
 <!-- Latest compiled and minified JavaScript -->
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  
 <link rel='stylesheet' id='ep2014-styles-css'  href='/css/poole.css' type='text/css' media='all' />
 <link rel='stylesheet' id='ep2014-styles-css'  href='/css/custom.css' type='text/css' media='all' />
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"> 
 <script type='text/javascript' src='http://3zso.com/js/jquery/jquery.js'></script>
 <script type='text/javascript' src='http://3zso.com/js/jquery/jquery-migrate.min.js'></script>

<style type="text/css">
.container { width: auto;}
</style>

  
 </div><!-- content2 end -->
     <footer role="contentinfo">
      <div class="content text-center">
        <small class="copyright">&copy;2017 Zhong Lizhi. Contents licensed under
          <a rel="license" target="ablank" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND 4.0</a> with attribution required.
        </small>
      </div>
    </footer>


<div style="display:none">
</div>
</body>
</html>
