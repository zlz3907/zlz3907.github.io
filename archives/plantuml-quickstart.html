<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-04-11 Tue 00:20 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>使用Emacs敲出UML，PlantUML快速指南</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Bliss Chung" />
<meta name="description" content="PlantUML是基于Java语言的开源UML图形绘制工具，它通过简单直观的脚本来字义和创建UML图形"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>

    <meta name="viewport" content="width=device-width, initial-scale=1">



    <script type='text/javascript' src='http://3zso.com/assets/js/vendor/modernizr.custom.js'></script>
    <script type='text/javascript' src='http://3zso.com/js/jquery/jquery.js'></script>
    <script type='text/javascript' src='http://3zso.com/js/jquery/jquery-migrate.min.js'></script>

<!--[if lt IE 10]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://3zso.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->


    <!--[if lt IE 9]>
        <script src="http://3zso.com/assets/js/vendor/respond.min.js"></script>
        <![endif]-->
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">

</div><!-- preamble end -->
 
   <div class="layout-reverse theme-base-03">
     <div class="sidebar">
       
       <div style="max-width: 38rem; padding-left: 1rem; padding-right: 1rem;">
         <div class="side-about">
 
           <h2>
             <a title="3zso.com" alt="3zso.com" href="/">
               <img alt="3ZSO" src="http://3zso.com/frm/logo/3zso-logo-128-h.svg" height="48" class="center-block">
             </a>
             <hr style="border:1px gray solid;">
             <a href="/">雪往北飘</a></h2>
           <p class="lead">博客、编码、架构、自我完善、GTD！</p>
         </div>
 
         <nav class="sidebar-nav" style="font-size: 20px;">
           <br >
           <a class="sidebar-nav-item " href="http://3zso.com">Home</a>
           <a class="sidebar-nav-item active" href="http://archive.3zso.com">Archive</a>
           <a class="sidebar-nav-item " href="http://source.3zso.com">Source</a>
         </nav>
 
         <div class="sidebar-sticky" style="max-width: 38rem; padding-left: 1rem; padding-right: 1rem;">
           <hr />
           <div class="sidebar-author">
             <h1>Bliss Chung <br><small>bliss@3zso.com</small></h1>
             <a href="https://github.com/zlz3907"><i class="fa fa-github"></i></a>
             <a href="https://twitter.com/zlz3907"><i class="fa fa-twitter"></i></a>
             <a href="mailto:bliss@3zso.com"><i class="fa fa-envelope"></i></a>
           </div>
         </div> <!-- end of class container sidebar-sticky-->
       </div>
     </div>

     <div class="content container">
      <aside class="site__banner">
        <div class="container">
          <div class="row">
            <div class="text-right">
              <p class="tagline">Bliss Chung. C<span>st.</span> 2014-06-25 Wed 23:37.<br />
                 <a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.1.1 (<a href="http://orgmode.org">Org</a> mode 9.0.5)</p>
            </div>
            <div class="col-xs-12 col-sm-5 col-sm-pull-6">
              <p></p>
            </div>
          </div><!-- .row -->
        </div><!-- .container -->
      </aside><!-- .site__banner.hidden-xs -->

<!--main class="site__content" role="main"-->
<div id="post">
<!-- hidden preamble -->
<div style="display:none">
</div>
<div id="content">
<h1 class="title">使用Emacs敲出UML，PlantUML快速指南</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org96a7398">前言</a></li>
<li><a href="#orga48c875">什么是PlantUML</a></li>
<li><a href="#org4b3c9f2">在Emacs里配置PlantUML（参考：Run it from Emacs）</a></li>
<li><a href="#org55e2e73">其他软件里的PlantUML下载和安装</a></li>
<li><a href="#orgf96f587">如何使用</a></li>
</ul>
</div>
</div>

<div id="outline-container-org96a7398" class="outline-2">
<h2 id="org96a7398">前言</h2>
<div class="outline-text-2" id="text-org96a7398">
<p>
<b>本文多数内容引用自官网文档，并非本人原创，也谈不上翻译，只是把自己
理解的东西用中文写出来。</b>
</p>

<p>
编写本文的目的旨在记录个人在学习PlantUML时对官网上一些内容的理解，以
及总结学习过程中遇到的问题，并将其分享。文章中如有不对之处欢迎大家直
言指正，以免造成误导。
</p>

<p>
<b>版权：本文可自由转载，但不能商用，不能衍生，保持署名。转载请注明作者及出处.</b>
</p>

<p>
<b><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</a></b>
</p>
</div>
</div>

<div id="outline-container-orga48c875" class="outline-2">
<h2 id="orga48c875">什么是PlantUML</h2>
<div class="outline-text-2" id="text-orga48c875">
<p>
PlantUML是一个快速创建UML图形的组件，官网上之所以称它是一个组件，我
想主要是因为多数情况下我们都是在Eclipse、NetBenas、Intellijidea、
Emacs、Word等软件里来使用PlantUML（<a href="http://www.plantuml.com/running.html">参看各软件相关配置</a>）。
</p>

<ul class="org-ul">
<li>PlantUML支持的图形有：
<ul class="org-ul">
<li>sequence diagram,</li>
<li>use case diagram,</li>
<li>class diagram,</li>
<li>activity diagram (here is the new syntax),</li>
<li>component diagram,</li>
<li>state diagram,</li>
<li>object diagram,</li>
<li>wireframe graphical interface</li>
</ul></li>

<li><p>
PlantUML通过简单和直观的语言来定义图形，它可以生成PNG、SVG和二进制
图片。下面是一个简单的示例：
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/orgmode-babel-sequenceuml.png
  Alice -&gt; Bob: synchronous call
  Alice -&gt;&gt; Bob: asynchronous call
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/orgmode-babel-sequenceuml.png" alt="orgmode-babel-sequenceuml.png" />
</p>
</div>

<p>
在官网上有一个简单的<a href="http://www.plantuml.com/plantuml/">在线Demo服务</a>， 有兴趣的朋友可以上去看下。
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org4b3c9f2" class="outline-2">
<h2 id="org4b3c9f2">在Emacs里配置PlantUML（参考：<a href="http://www.plantuml.com/emacs.html">Run it from Emacs</a>）</h2>
<div class="outline-text-2" id="text-org4b3c9f2">
<ol class="org-ol">
<li>下载 <code>plantuml.jar</code> 到你的硬盘上（<a href="http://www.plantuml.com/download.html">官网下载页面</a>）</li>
<li><p>
安装生成图片用的软件<a href="http://www.plantuml.com/graphvizdot.html">Graphviz</a>
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #969896; font-style: italic;">## </span><span style="color: #969896; font-style: italic;">&#22914;&#26524;&#26159;Ubuntu&#31995;&#32479;&#65292;&#21487;&#20197;&#30452;&#25509;&#36816;&#34892;&#19979;&#38754;&#30340;&#21629;&#20196;&#23433;&#35013;</span>
sudo apt-get install graphviz
</pre>
</div></li>
<li><p>
在 <code>.emacs</code> 里添加配置，把 <code>plantuml</code> 添加到
<code>org-babel-load-languages</code> 加载语言列表里。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">active Org-babel languages</span>
<span style="color: #c5c8c6;">(</span>org-babel-do-load-languages
 'org-babel-load-languages
 '<span style="color: #8abeb7;">(</span><span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">other Babel languages</span>
   <span style="color: #f0c674;">(</span>plantuml . t<span style="color: #f0c674;">)</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<p>
然后把刚下载到的 <code>plantuml.jar</code> 文件的存放路径也添加到 <code>.emacs</code>
文件中，以方便Emacs调用。
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68; font-weight: bold;">setq</span> org-plantuml-jar-path
      <span style="color: #8abeb7;">(</span>expand-file-name <span style="color: #8abeb7;">"~/path/to/plantuml.jar"</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div></li>
</ol>

<p>
重启Emacs，复制上面的示例代码试一下吧！
</p>
</div>
</div>
<div id="outline-container-org55e2e73" class="outline-2">
<h2 id="org55e2e73">其他软件里的PlantUML下载和安装</h2>
<div class="outline-text-2" id="text-org55e2e73">
<ul class="org-ul">
<li><a href="http://www.plantuml.com/index.html">PlantUML官网首页</a></li>
<li><a href="http://www.plantuml.com/download.html">PlantUML各版本的下载页面</a> (英文）</li>
<li><a href="http://www.plantuml.com/running.html">在各种软件里运行PlantUML的相关配置</a> （英文）</li>
<li><a href="http://www.plantuml.com/screenshot.html">Screenshots</a></li>
<li><a href="http://plantuml.sourceforge.net/qa">Question &amp; Answer</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgf96f587" class="outline-2">
<h2 id="orgf96f587">如何使用</h2>
<div class="outline-text-2" id="text-orgf96f587">
</div><ul class="org-ul"><li><a id="org1a92ec6"></a>顺序图（Sequence Diagram）<br /><ul class="org-ul"><li><a id="orgf832891"></a>简单示例<br /><div class="outline-text-4" id="text-orgf832891">
<p>
顺序图用 <code>-&gt;</code> , <code>--&gt;</code>, <code>&lt;-</code>, <code>&lt;--</code> 来绘制参与者（Participants）之
间的消息（Message）。
</p>
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s1.png
  Alice -&gt; Bob: Authentication Request
  Bob --&gt; Alice: Authentication Response

  Alice -&gt; Bob: Another atuhentication Request
  Alice &lt;-- Bob: Another authentication Response
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s1.png" alt="plantuml-quickstart-s1.png" />
</p>
</div>
</div></li>
<li><a id="orgbe5cae4"></a>注释语句<br /><div class="outline-text-4" id="text-orgbe5cae4">
<p>
以单引号开始头行，即是一个单行注释。多行注释可以使用"<i>'"表
示注释内容的开始，然后使用"'</i>"来表示注释内容的结束。
</p>
</div></li>
<li><a id="orge3ff445"></a>申明参与者<br /><div class="outline-text-4" id="text-orge3ff445">
<p>
申明参与者，可以使用 <code>participant</code> 关键词，也可以使用下面的参与者
分类关键词来申明参与者：
</p>
<ul class="org-ul">
<li>actor</li>
<li>boundary</li>
<li>control</li>
<li>entity</li>
<li>database</li>
</ul>

<p>
<b>不同的参与者类型，其图标也是不一样的。</b>
</p>
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s2.png
  actor Foo1
  boundary Foo2
  control Foo3
  entity Foo4
  database Foo5
  Foo1 -&gt; Foo2 : To boundary
  Foo1 -&gt; Foo3 : To control
  Foo1 -&gt; Foo4 : To entity
  Foo1 -&gt; Foo5 : To database
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s2.png" alt="plantuml-quickstart-s2.png" />
</p>
</div>

<p>
使用 <code>as</code> 关键词可以为参与者起一个别名，这样在对引用长名的参与者时，
会方便很多。在参与者申明语句后行尾可以追加背景色的设置，只要把标准
的<a href="http://www.w3schools.com/HTML/html_colornames.asp">HTML颜色值</a> 写在后面就行了。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s3.png
  actor Bob #red
  ' The only defference between actor
  ' and participant is the drawing
  participant Alice
  participant "I have a really\nlong name" as L #99ff99
  /' You can also declare:
     participant L as "I have a really\nlong name" #99ff99
    '/

  Alice -&gt; Bob: Authentication Request
  Bob -&gt; Alice: Authentication Response
  Bob -&gt; L: Log transaction
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s3.png" alt="plantuml-quickstart-s3.png" />
</p>
</div>
</div></li>
<li><a id="org86a9cd7"></a>使用非字母的参与者名称（Use non-letters in participants）<br /><div class="outline-text-4" id="text-org86a9cd7">
<p>
针对非字母的参与者名，我们可以使用双引号，同样也可以为比较长的名字
起个别名，方法同上使用 <code>as</code> 关键词。
</p>

<p>
使用上面的关键词来申明参与者，是一种显示申明；而采用引号来申明参与
者则是一种隐示申明方法，它不需要专门的位置去定义。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s4.png
  Alice -&gt; "Bob()" : Hello
  "Bob()" -&gt; "This is very\nlong" as Long
  ' You can also declare:
  ' "Bob()" -&gt; Long as "This is very\nlong"
  Long --&gt; "Bob()" : ok
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s4.png" alt="plantuml-quickstart-s4.png" />
</p>
</div>
</div></li>
<li><a id="org10d10f5"></a>发送消息给自己（Message to Self）<br /><div class="outline-text-4" id="text-org10d10f5">
<p>
一个参与者可以给自己发送消息，消息名如果需要有多行文本，可以用
<code>\n</code> 来表示换行。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s5.png
  Alice -&gt; Alice: This is a signal to self.\nIt also demonstrates\nmultiline \ntext
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s5.png" alt="plantuml-quickstart-s5.png" />
</p>
</div>
</div></li>
<li><a id="org6226391"></a>改变箭头的样式（Change arrow style）<br /><div class="outline-text-4" id="text-org6226391">
<p>
在用例图里可以通过以下方式来改变箭头的样式：
</p>
<ul class="org-ul">
<li>使用 <code>\</code> 或 <code>/</code> 来替换 <code>&lt;</code> 或 <code>&gt;</code> 可以让箭头只显示上半部分或下半
部分。</li>
<li>重复输入箭头或斜杠（ <code>&gt;&gt;</code> <code>//</code> ），用来绘制空心箭头。</li>
<li>使用双横线 <code>--</code> 替代 <code>-</code> 可以用来绘制点线。</li>
<li>在箭头后面加个 <code>o</code> 可以在箭头前绘制一个圆圈。</li>
<li>使用 <code>&lt;-&gt;</code> 可用来绘制双向箭头。</li>
</ul>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s6.png
  Bob -&gt; Alice
  Bob -&gt;&gt; Alice
  Bob -\ Alice
  Bob \\- Alice
  Bob //-- Alice

  Bob -&gt;o Alice
  Bob o\\-- Alice

  Bob &lt;-&gt; Alice
  Bob &lt;&lt;-\\o Alice
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s6.png" alt="plantuml-quickstart-s6.png" />
</p>
</div>
</div></li>
<li><a id="org081e3be"></a>改变箭头的颜色（Change arrow color）<br /><div class="outline-text-4" id="text-org081e3be">
<p>
要改变箭头的颜色，可以使用<a href="http://www.w3schools.com/HTML/html_colornames.asp">HTML颜色符号</a>，参看下面的例子：
</p>
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s7.png
  Bob -[#red]&gt; Alice : hello
  Alice -[#0000FF]-&gt;Bob : ok
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s7.png" alt="plantuml-quickstart-s7.png" />
</p>
</div>
</div></li>
<li><a id="orgfa7a402"></a>消息序号（Message sequence numbering）<br /><div class="outline-text-4" id="text-orgfa7a402">
<p>
关键词 <code>autonumber</code> 用来给自动的给消息添加上序号。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s8.png
  autonumber
  Bob -&gt; Alice : Authentication Request
  Bob &lt;- Alice : Authentication Response
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s8.png" alt="plantuml-quickstart-s8.png" />
</p>
</div>

<p>
如果需要指定一个起始号码，可以直接在 <code>autonumber</code> 后面加个数字就行
了，如果要设置自增量，再在后面加一个数字就行了（ <code>autonumber start
    increment</code> ）。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s9.png
  autonumber
  Bob -&gt; Alice : Authentication Request
  Bob &lt;- Alice : Authentication Response

  autonumber 15
  Bob -&gt; Alice : Another authentication Request
  Bob &lt;- Alice : Another authentication Response

  autonumber 40 10
  Bob -&gt; Alice : Yet another authentication Request
  Bob &lt;- Alice : Yet another authentication Response
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s9.png" alt="plantuml-quickstart-s9.png" />
</p>
</div>

<p>
我们也可以为序号指定数字格式，这个格式化的过程实际上是Java类
<code>DecimalFormat</code> 来执行的（ <code>0</code> 表示数字， <code>#</code> 缺省补零位数）。
</p>

<p>
同样的，也可以使用一些HTML标签来控制数字的样式。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s10.png
  autonumber "&lt;b&gt;[000]"
  Bob -&gt; Alice : Authentication Request
  Bob &lt;- Alice : Authentication Response

  autonumber 15 "&lt;b&gt;(&lt;u&gt;##&lt;/u&gt;)"
  Bob -&gt; Alice : Another authentication Request
  Bob &lt;- Alice : Another authentication Response

  autonumber 40 10 "&lt;font color=red&gt;Message 0  "
  Bob -&gt; Alice : Yet another authentication Request
  Bob &lt;- Alice : Yet another authentication Response
#+END_SRC
</pre>



<div class="figure">
<p><img src="../img/plantuml-quickstart-s10.png" alt="plantuml-quickstart-s10.png" />
</p>
</div>
</div></li>
<li><a id="org1817ced"></a>标题（Title）<br /><div class="outline-text-4" id="text-org1817ced">
<p>
要给图形加一个标题可以用 <code>title</code> 关键词来设置。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s11.png
  title Simple Comunication example

  Alice -&gt; Bob : Authentication Request
  Bob --&gt; Alice : Authentication Response
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s11.png" alt="plantuml-quickstart-s11.png" />
</p>
</div>
</div></li>
<li><a id="orgde4cef2"></a>图形图例（Legend the diagram）<br /><div class="outline-text-4" id="text-orgde4cef2">
<p>
使用 <code>legend</code> 和 <code>end legend</code> 关键词可以设置图形的图例。图例可以设
为左对齐、右对齐和居中对齐。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s12.png
  Alice -&gt; Bob : Hello
  legend right
   Short
   legend
  endlegend
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s12.png" alt="plantuml-quickstart-s12.png" />
</p>
</div>
</div></li>
<li><a id="org299ed4f"></a>分割图形（Splitting diagrams）<br /><div class="outline-text-4" id="text-org299ed4f">
<p>
关键词 <code>newpage</code> 是用来把图形分割成几个图片的。每一个被分割出来的
图片可以看作是一个新的页面（ <code>new page</code> ），如果要给新的页面添加一
个标题，可以紧跟在关键词 <code>newpage</code> 之后来设置。
</p>

<p>
使用这个方法可以方便的在Word里把比较长的图形分别打印到几个不同的页
面上（有点分页符的概念）。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s13.png
  Bliss -&gt; Tia : I love you
  Bliss -&gt; Tia : I miss you

  newpage

  Bliss -&gt; Tia : Let's go home
  Bliss -&gt; Tia : Quick

  newpage A title for the\nlast page

  Tia -&gt; Bliss : Give me money
  Tia -&gt; Bliss : No money No love
#+END_SRC
</pre>
</div></li>
<li><a id="orgcb29ffc"></a>消息分组（Grouping message）<br /><div class="outline-text-4" id="text-orgcb29ffc">
<p>
有时候可能需要对消息进行分组，那么可以使用下面的关键词来实现：
</p>
<ul class="org-ul">
<li>alt/else</li>
<li>opt</li>
<li>loop</li>
<li>par</li>
<li>break</li>
<li>critical</li>
<li>group, 这个关键词后面的文字会作为组名显示在图形上</li>
</ul>

<p>
上面的关键词后可以添加一些文本用来显示在头部（注： <code>group</code> 除外，因
为它后面的文本用来显示在组名称的位置）。在组嵌套组的结构里可以用关
键词 <code>end</code> 来关闭组或者说是表示一个组符号的结束符（类似 <code>if/endif</code>
）。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s14.png
  Alice -&gt; Bob: Authentication Request

  alt successful case
    Bob -&gt; Alice: Authentication Accepted
  else some kind of failure
    Bob -&gt; Alice: Atuhentication Failue
    group My own label
      Alice -&gt; Log : Log attack start
      loop 1000 times
        Alice -&gt; Bob: DNS Attack
      end
      Alice -&gt; Log : Loag alice end
    end
  else Another type of failue
    Bob -&gt; Alice: Please repeat
  end
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s14.png" alt="plantuml-quickstart-s14.png" />
</p>
</div>
</div></li>
<li><a id="orge376179"></a>消息注解（Notes on messages）<br /><div class="outline-text-4" id="text-orge376179">
<p>
我们可能经常会在消息的左边或右边使用注解，要添加注解，只要使用
<code>note left</code> 或 <code>note right</code> 关键词就可以了。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s15.png
  Alice -&gt; Bob : hello
  note left: this is a first note

  Bob -&gt; Alice : ok
  note right: this is anther note

  Bob -&gt; Bob : I am thinking
  note left
       a note
       can also be defined
       on several lines
  end note
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s15.png" alt="plantuml-quickstart-s15.png" />
</p>
</div>
</div></li>
<li><a id="org4a51875"></a>一些其他的注解方式（Some other notes）<br /><div class="outline-text-4" id="text-org4a51875">
<p>
通过使用关键词 <code>note left of</code> ， <code>note right of</code> 或 <code>note over</code> ，
我们还可以把注解放置在与之相关的参与者的左边或右边，或下方。
</p>

<p>
通过改变注解的<a href="http://www.w3schools.com/HTML/html_colornames.asp">背景色</a>，我们还可以高亮一个注解文本块。
</p>

<p>
如果要使用多行注解，可以使用关键词 <code>end note</code> 来表示注解的结束。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s16.png
  participant Alice
  participant Bob
  note left of Alice #aqua
       This is displayed
       left of Alice.
  end note

  note right of Alice: This is displayed right of Alice.

  note over Alice: This displayed over Alice.

  note over Alice, Bob #FFAAAA: This is displayed\n over Bob and Alice.

  note over Bob, Alice
       This is yet another
       example of
       a long note.
  end note
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s16.png" alt="plantuml-quickstart-s16.png" />
</p>
</div>
</div></li>
<li><a id="orgbbb668d"></a>使用HTML进行格式化（Formatting using HTML）<br /><div class="outline-text-4" id="text-orgbbb668d">
<p>
我们可以使用少量的HTML标签来格式化文本：
</p>
<ul class="org-ul">
<li><code>&lt;b&gt;</code> 加粗文本</li>
<li><code>&lt;u&gt;</code> 或 <code>&lt;u:#AAAAAA&gt;</code> 或 <code>&lt;u:colorName&gt;</code> 用来加下划线</li>
<li><code>&lt;i&gt;</code> 斜体</li>
<li><code>&lt;s&gt;</code> 或 <code>&lt;s:#AAAAAA&gt;</code> 或 <code>&lt;s:colorName&gt;</code> 用来加删除线</li>
<li><code>&lt;w&gt;</code> 或 <code>&lt;w:#AAAAAA&gt;</code> 或 <code>&lt;w:colorName&gt;</code> 用来加波浪线</li>
<li><code>&lt;color:#AAAAAA&gt;</code> 或 <code>&lt;color:colorName&gt;</code> 用来设置文本颜色</li>
<li><code>&lt;back:#AAAAAA&gt;</code> 或 <code>&lt;back:colorName&gt;</code> 用来设置背景色</li>
<li><code>&lt;size:nn&gt;</code> 设置字体大小</li>
<li><code>&lt;img src="file"&gt;</code> 或 <code>&lt;img:file&gt;</code> 用来添加图片，图片文件必须
是可以访问得到才行。</li>
<li><code>&lt;img src="http://url"&gt;</code> 或 <code>&lt;img:http://url&gt;</code> 用来添加一个互
联网图片，同样的图片地址必须是可用的才行。</li>
</ul>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-s17.png
  participant Alice
  participant "The &lt;b&gt;Famous&lt;/b&gt; Bob" as Bob

  Alice -&gt; Bob : A &lt;i&gt;well formated&lt;/i&gt; message
  note right of Alice
    This is &lt;back:cadetblue&gt;&lt;size:18&gt;displayed&lt;/size&gt;&lt;/back&gt;
    &lt;u&gt;left of&lt;/u&gt; Alice.
  end note
  note left of Bob
    &lt;u:red&gt;This&lt;/u&gt; is &lt;color #118888&gt;displayed&lt;/color&gt;
    &lt;b&gt;&lt;color purple&gt;left of&lt;/color&gt; &lt;s:red&gt;Alice&lt;/strike&gt; Bob&lt;/b&gt;
  end note
  note over Alice, Bob
    &lt;w:#FF33FF&gt;This is hosted&lt;/w&gt; by &lt;img ../img/code.png&gt;
  end note
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-s17.png" alt="plantuml-quickstart-s17.png" />
</p>
</div>
</div></li></ul></li>

<li><a id="orge211e8b"></a>用例图（Use Case Diagram）<br /><ul class="org-ul"><li><a id="orgff64737"></a>用例（Usecase）<br /><div class="outline-text-4" id="text-orgff64737">
<p>
用例可以用一对小括号括起来表示，也可以使用 <code>usecase</code> 关键词来定义。
用例也可以通过使用 <code>as</code> 关键词来设置别名，在建立关系的时候可以使用
别名。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-u1.png
  @startuml
  (Usecase One)
  (Usecase Two) as (UC2)
  usecase UC3
  usecase (Last\nusecase) as UC4
  @enduml
#+END_SRC
</pre>

<div class="figure">
<p><img src="../img/plantuml-quickstart-u1.png" alt="plantuml-quickstart-u1.png" />
</p>
</div>
</div></li>
<li><a id="org6996dbf"></a>参与者（Actors）<br /><div class="outline-text-4" id="text-org6996dbf">
<p>
定义参与者时，可以把参与者的名称放在两个冒号的中间，也可以用
<code>actor</code> 关键词来定义参与者。同样参与着也可以使用别名。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-u2.png
  @startuml
  :Actor 1:
  :Another\nactor: as Men2
  actor Men3
  actor :Last actor: as Men4
  @enduml
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-u2.png" alt="plantuml-quickstart-u2.png" />
</p>
</div>
</div></li>
<li><a id="orgbe31866"></a>示例<br /><div class="outline-text-4" id="text-orgbe31866">
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-u99.png
  left to right direction
  skinparam packageStyle rect
  actor customer
  actor clerk
  rectangle checkout {
    customer -- (checkout)
    (checkout) .&gt; (payment) : include
    (help) .&gt; (checkout) : extends
    (checkout) -- clerk
  }
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-u99.png" alt="plantuml-quickstart-u99.png" />
</p>
</div>
</div></li></ul></li>

<li><a id="org3966f49"></a>类图（Class Diagram）<br /><ul class="org-ul"><li><a id="orge3305fd"></a>示例1<br /><div class="outline-text-4" id="text-orge3305fd">
<div class="org-src-container">
<pre class="src src-plantuml">class Company {

}
class Department {
  name : Name
}
class Office {
  address : String
  phone : Number
}
class Headquarters {

}
class Person {
  name : Name
  employeeID : Integer
  title : String
  getPhoto() : Photo
  getPhone() : Number
  getContactInformation() : ContactInformation
  getPersonalRecords() : PersonnelRecord
}
class ContactInformation {
  address : String
}
class PersonnelRecord {
  taxID
  employmentHistory
  salary
}

Company "1" *-do- "1..*" Department
Company "1" *-do- "1..*" Office
'(Department, Office) -up-* Company
Department "*" -ri- "*" Office : Location &gt;
Department "*" --* "0..1" Department
Office &lt;|-do- Headquarters
Department "*" -do- "member 1..*" Person
Person "1 {subsets member}" -u- "*" Department : manager
Person .ri.&gt; ContactInformation
Person ..&gt; PersonnelRecord
PersonnelRecord -() ISecureInformation
</pre>
</div>
</div></li></ul></li>

<li><a id="org5182468"></a>活动图（Activity Diagram）<br /><ul class="org-ul"><li><a id="orge5ca3a0"></a>简单活动（Simple Activity）<br /><div class="outline-text-4" id="text-orge5ca3a0">
<p>
在活动图中，你可以使用 <code>(*)</code> 来表示活动开始点和结束点。使用 <code>--&gt;</code>
来表示箭头。
</p>
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-a1.png
  (*) --&gt; "First Activity"
  "First Activity" --&gt; (*)
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-a1.png" alt="plantuml-quickstart-a1.png" />
</p>
</div>
</div></li>
<li><a id="org27d2c08"></a>带标注的箭头（Label on arrows）<br /><div class="outline-text-4" id="text-org27d2c08">
<p>
缺省情况下，活动图的箭头是没有标注的。但我们可以通过方括号
<code>[labels]</code> 来设置标注，只要把它放在箭头定义的后面就可以了。
</p>
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-a2.png
  (*) --&gt; "First Activity"
  --&gt;[You can put also labels] "Second Activity"
  --&gt;(*)
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-a2.png" alt="plantuml-quickstart-a2.png" />
</p>
</div>
</div></li>
<li><a id="org347a00d"></a>改变箭头的方向（Changing arrow direction）<br /><div class="outline-text-4" id="text-org347a00d">
<p>
我们可以使用 <code>-&gt;</code> 创建一个水平箭头，也可以通过下面的方式来改变箭头
的方向：
</p>
<ul class="org-ul">
<li><code>-down-&gt;</code> 向下（这个是默认的，等同于 =&#x2013;&gt;=）</li>
<li><code>-right-&gt;</code> 向右</li>
<li><code>-left-&gt;</code> 向左</li>
<li><code>-up-&gt;</code> 向上</li>
</ul>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-a3.png
  (*) --&gt; "1"
  -right-&gt; "2"
  -down-&gt; "3"
  -left-&gt; "4"
  -le-&gt; "5"
  -up-&gt; "6"
  -l-&gt; "7"
  -do-&gt; "8"
  -d-&gt; "9"
  -&gt; "10"
  --&gt; (*)
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-a3.png" alt="plantuml-quickstart-a3.png" />
</p>
</div>

<p>
在描述箭头时， <code>up|down|left|right</code> 这几个单词的写法可以简化，
用单词开头的一个或两个字母来替换就行了，比如 <code>-down-&gt;</code> 也可以写成
<code>-d-&gt;</code> 或者 <code>-do-&gt;</code> 。
</p>
</div></li>
<li><a id="orgc4f24e5"></a>分支（Branches）<br /><div class="outline-text-4" id="text-orgc4f24e5">
<p>
在PlantUML里，我们可以使用 <code>if/then/else</code> 关键词来定义分支。
</p>
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-a4.png
  (*) --&gt; "Initialisation"

  if " Some Test" then
    --&gt;[ture] "Some Activity"
    --&gt; "Another Activity"
    -right-&gt; (*)
  else
    -&gt;[false] "Something else"
    --&gt;[Ending process] (*)
  endif
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-a4.png" alt="plantuml-quickstart-a4.png" />
</p>
</div>
</div></li>
<li><a id="org62a8e10"></a>多分支（More on Branches）<br /><div class="outline-text-4" id="text-org62a8e10">
<p>
直接给例子：
</p>
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-a5.png
  (*) --&gt; if "Some Test" then
    --&gt;[true] "1"

    if "" then
      -&gt; "3" as a3
    else
      if "Other test" then
        -left-&gt; "5"
        --&gt; (*)
      else
        --&gt; "6"
        --&gt; (*)
      endif
    endif

  else
    -&gt;[false] "2"
    --&gt; (*)
  endif

  a3 --&gt; if "last test" then
    --&gt; "7"
    --&gt; (*)
  else
    -&gt; "8"
    --&gt; (*)
  endif
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-a5.png" alt="plantuml-quickstart-a5.png" />
</p>
</div>
</div></li>
<li><a id="org4865926"></a>同步块（Synchronization）<br /><div class="outline-text-4" id="text-org4865926">
<p>
同步块可以用“=== code ===”来表示。
</p>
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-a6.png
  (*) --&gt; ===B1===
  --&gt; "parallel Activity 1"
  --&gt; ===B2===

  ===B1=== --&gt; "Parallel Activity 2"
  --&gt; ===B2===

  --&gt; (*)
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-a6.png" alt="plantuml-quickstart-a6.png" />
</p>
</div>

<p>
一个小实例
</p>
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-a7.png
  (*) --&gt; "Select site"
  --&gt; "Commission architect"
  --&gt; "Develop plan"
  --&gt; "Bid plan" as bp
  if "" then
    --&gt;[else] ===B1===
    --&gt; "Do site work"
    --&gt; ===B2===
    ===B1=== --&gt; "Do trade work"
    --&gt; ===B2===
    --&gt; "Finish construction"
    --&gt; (*)
  else
    -u-&gt;[not accepted] bp
  endif
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-a7.png" alt="plantuml-quickstart-a7.png" />
</p>
</div>
</div></li>
<li><a id="org7381077"></a>长文本的活动描述（Long activity description）<br /><div class="outline-text-4" id="text-org7381077">
<p>
在定义活动的时候，有时候需要用多行文字来描述这个活动，这时我们可以
在描述里添加换行符 <code>\n</code> ，也可以使用少量的HTML标签。
</p>

<p>
以下是可以使用的HTML标签：
</p>
<pre class="example">
&lt;b&gt;
&lt;i&gt;
&lt;font size="nn"&gt; or &lt;size:nn&gt; to change font size
&lt;font color="#AAAAAA"&gt; or &lt;font color="colorName"&gt;
&lt;color:#AAAAAA&gt; or &lt;color:colorName&gt;
&lt;img:file.png&gt; to include an image
</pre>

<p>
针对较长文本描述活动，可以起一个较短别名（如：<a href="#coderef-alias" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-alias');" onmouseout="CodeHighlightOff(this, 'coderef-alias');">"long text" as A1</a>），
在图形定义脚本中可以直接使用别名，参看下面的例子中的<a href="#coderef-useA1" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-useA1');" onmouseout="CodeHighlightOff(this, 'coderef-useA1');">A1</a>。
</p>
<pre class="example">
<span class="linenr">1: </span>#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-a8.png
<span class="linenr">2: </span>  (*) -l-&gt; "this &lt;size:20&gt;activity&lt;/size&gt;
<span class="linenr">3: </span>            is &lt;b&gt;very&lt;/b&gt; &lt;color:red&gt;long&lt;/color&gt;
<span class="linenr">4: </span>            and defined on serveral lines
<span id="coderef-alias" class="coderef-off"><span class="linenr">5: </span>            that contains many &lt;i&gt;text&lt;/i&gt;" as A1</span>
<span class="linenr">6: </span>  -up-&gt; "Another activity\n on serveral lines"
<span class="linenr">7: </span>
<span id="coderef-useA1" class="coderef-off"><span class="linenr">8: </span>  A1 --&gt; "Short activity\n&lt;img:../img/code.png&gt;"</span>
<span class="linenr">9: </span>#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-a8.png" alt="plantuml-quickstart-a8.png" />
</p>
</div>
</div></li>
<li><a id="orge579177"></a>注释（Notes）<br /><div class="outline-text-4" id="text-orge579177">
<p>
PlantUML可以通过在脚本里使用 <code>note</code> 来添加注释文本块。
</p>

<p>
<b>note commands:</b>
</p>
<ul class="org-ul">
<li>note left</li>
<li>note right</li>
<li>note top</li>
<li>note bottom</li>
</ul>

<p>
PlantUML用上面列表里的命令来标注一个注释块的开始，然后用 <code>end
    note</code> 来标注注释块的结束。同时note命令也允许使用单行定义一个文本块，
详见下面的例子。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-a9.png
  (*) --&gt; "Some Activity" as s
  note right: This activity has to be defined
  s --&gt; (*)
  note left
    This note is on
    serveral lines
  end note
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-a9.png" alt="plantuml-quickstart-a9.png" />
</p>
</div>
</div></li>
<li><a id="org61e9e2e"></a>分区（Partition）<br /><div class="outline-text-4" id="text-org61e9e2e">
<p>
通过分区关键词 <code>partition</code> 可以定义一个分区，并且可以使用HTML的
颜色码或颜色名来设置分区的背景色。在你申明一个活动时，PlantUML会自动
的把这个活动对象放置到最后使用的分区中。当然，也可以使用 <code>end
    partitio</code> 关闭分区定义。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-a10.png
  partition Conductor
  (*) --&gt; "Climbs on Platform"
  --&gt; === S1 ===
  --&gt; Bows
  end partition

  partition Aduience #LightSkyBlue
  === S1 === --&gt; Applauds

  partition Conductor
  Bows --&gt; === S2 ===
  --&gt; WavesArmes
  Applauds --&gt; === S2 ===
  end partition

  partition Orchestra #CCCCEE
  WavesArmes --&gt; Introduction
  --&gt; "Play music"
 end partition
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-a10.png" alt="plantuml-quickstart-a10.png" />
</p>
</div>
</div></li>
<li><a id="org0b0c6ef"></a>图形标题（Title the diagram）<br /><div class="outline-text-4" id="text-org0b0c6ef">
<p>
标题关键词 <code>title</code> 用来设置一个图形的标题文本，我们可以在
<code>title</code> 和 <code>end title</code> 两个关键词之间放置比较长的标题文本。
</p>
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-a11.png
  title Simple example\nof title
  (*) --&gt; "First activity"
  --&gt; (*)
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-a11.png" alt="plantuml-quickstart-a11.png" />
</p>
</div>
</div></li>
<li><a id="orga2efce6"></a>皮肤（Skinparam）<br /><div class="outline-text-4" id="text-orga2efce6">
<p>
皮肤命令 <code>skinparam</code> 可以改变图形的颜色和字体。这些命令可以在以下
的位置中使用：
</p>
<ul class="org-ul">
<li>在图形定义里使用，</li>
<li>在包含的文件里使用，</li>
<li>在一个配置文件里使用，这个配置文件一般由命令行或ANT的Task来提供。</li>
</ul>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-a12.png
  skinparam backgroundColor #AAFFFF
  skinparam activityStartColor red
  skinparam activityBarColor SaddleBrown
  skinparam activityEndColor Silver
  skinparam activityBackgroundColor Peru
  skinparam activityBorderColor Peru
  skinparam activityFontName Impact
  skinparam activityShape octagon

  (*) --&gt; "Climbs on Platform"
  --&gt; === S1 ===
  --&gt; Bows
  --&gt; === S2 ===
  --&gt; WavesArmes
  --&gt; (*)
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-a12.png" alt="plantuml-quickstart-a12.png" />
</p>
</div>

<p>
<b>使用 <code>skinparam activityShape octagon</code> 命令可以把活动图形改成八角
 形的。(好像没效果！)</b>
</p>
</div></li>
<li><a id="orgb13b053"></a>完整示例（Complete Example）<br /><div class="outline-text-4" id="text-orgb13b053">
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-a13.png
  'http://click.sourceforge.net/images/activity-diagram-small.png
  title Servlet Container

  (*) --&gt; "ClickServlet.handleRequest()"
  --&gt; "new Page"

  if "Page.onSecurityCheck" then
    -&gt;[true] "Page.onInit()"

    if "isForward?" then
      -&gt;[no] "Process controls"

      if "continue processing?" then
        --&gt;[yes] ===RENDERING===
      else
        --&gt;[no] ===REDIRECT_CHECK===
      endif

    else
      --&gt;[yes] ===RENDERING===
    endif

    if "is Post?" then
      --&gt;[yes] "Page.onPost()"
      --&gt; "Page.onRender()" as render
      --&gt; ===REDIRECT_CHECK===
    else
      --&gt;[no] "Page.onGet()"
      --&gt; render
    endif

  else
    --&gt;[false] ===REDIRECT_CHECK===
  endif

  if "Do redirect?" then
    -&gt;[yes] "redirect request"
    --&gt; ==BEFORE_DESTORY===
  else
    if "Do Forward?" then
      -left-&gt;[yes] "Forward request"
      --&gt; ==BEFORE_DESTORY===
    else
      -right-&gt;[no] "Render page template"
      --&gt; ==BEFORE_DESTORY===
    endif
  endif

  --&gt; "Page.onDestory()"
  --&gt;(*)
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-a13.png" alt="plantuml-quickstart-a13.png" />
</p>
</div>
</div></li></ul></li>

<li><a id="org09b8cf0"></a>活动图Beta<br /><div class="outline-text-3" id="text-org09b8cf0">
<p>
Beta版本的活动图简化了活动图的符号定义，从 <code>V7947</code> 这个版本开始，
PlantUML就开始引入了一些简化写法，当然到目前（20140627）为止还不是
很完善，但这个版本里的一些简化写法已经是PlantUML后续版本的发展方向。
</p>

<p>
下文中将会用几个简单的示例来介绍Beta版活动图的新功能，有兴趣的朋友
也可以试一下，在使用新的写法之前需要把 <code>GraphViz</code> 更新到最新版本。
</p>

<p>
关于更多的PlantUML版本更新信息可以参考官网页面（<a href="http://www.plantuml.com/news.html">What's New？</a>）
</p>
</div>
<ul class="org-ul"><li><a id="org1b5eed5"></a>简单活动（Simple Activity）<br /><div class="outline-text-4" id="text-org1b5eed5">
<p>
在这个例子里，活动元素从一个 <code>:</code> 开始，然后到一个 <code>;</code> 结束。
开始和结束符号，可以用 <code>start</code> 和 <code>end</code> 两个关键词来表示。之前版
本的开始和结束符都是用同一个符号 <code>(*)</code> 来表示的，个人觉得新的写法
逻辑更清晰，代码可读性更高。
</p>

<p>
至于更多的文本格式，大家可以参考：<a href="http://www.plantuml.com/creole.html">Creole engine</a>
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-ab1.png
  start

  :Hello world;

  :This is on defined on
  serveral **lines**;

  stop
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-ab1.png" alt="plantuml-quickstart-ab1.png" />
</p>
</div>
</div></li>
<li><a id="org29d4dd4"></a>条件符号（Conditional）<br /><div class="outline-text-4" id="text-org29d4dd4">
<p>
和之前一样，还是使用 <code>if</code> ， <code>then</code> 和 <code>else</code> 关键词，但分支条件的
标签 <code>Labels</code> 可以直接写在关键词 <code>then</code> 和 <code>else</code> 的后面，并用小括
号括起来就可以了（如： <code>(Labels)</code> ）。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-ab2.png
  start

  if (graphviz installed?) then (yes)
    :process all\ndiagrams;
  else (no)
    :process only
    __sequence__ and __activity__ diagrams;
  endif

  stop
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-ab2.png" alt="plantuml-quickstart-ab2.png" />
</p>
</div>

<p>
在新版本里除了使用 <code>else</code> 外，还新加了一个 <code>elseif</code> 关键词，有了这
个语法，我们就可以绘制一系列条件的活动图。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-ab3.png
  start
  if (condition A) then (yes)
    :Text1;
  elseif (condition B) then (yes)
    :Text2;
    stop
  elseif (condition C) then (yes)
    :Text 3;
  elseif (condition D) then (yes)
    :Text 4;
  else (nothing)
    :Text else;
  endif
  stop
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-ab3.png" alt="plantuml-quickstart-ab3.png" />
</p>
</div>
</div></li>

<li><a id="org8e26ba5"></a>重复循环（Repeat Loop）<br /><div class="outline-text-4" id="text-org8e26ba5">
<p>
通过 <code>repeat</code> 和 <code>repeat while</code> 关键词可以创建循环结构的图形。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-ab4.png
  start

  repeat
    :read data;
    :generate diagrams;
  repeat while (more data?)

  stop
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-ab4.png" alt="plantuml-quickstart-ab4.png" />
</p>
</div>
</div></li>
<li><a id="orgccae1a3"></a>条件循环（While Loop）<br /><div class="outline-text-4" id="text-orgccae1a3">
<p>
“条件循环”和上面的“重复循环”不太一样，上面的“重复循环”是先执行一次
循环体里的内容，然后再执行断言条件，看是否重复执行循环体；而条件循
环则将断言放到了最前面，因此它是先判断是否满足条件再执行循环体里的
内容。
</p>

<p>
要创建条件循环结构的图形可以通过使用 <code>while</code> 和 <code>end while</code> 两个关
键词来实现。如果要给条件分支加上标注，可以在 <code>while</code> 条件后加上一
个 <code>is</code> 关键词，然后用小括号括上要标注的内容；在 <code>end while</code> 后可
以直接用小括号括上要标注的内容。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-ab5.png
  start
  while (data available?) is (not empty)
    :read data;
    :generate diagrams;
  end while (empty)
  stop
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-ab5.png" alt="plantuml-quickstart-ab5.png" />
</p>
</div>
</div></li>
<li><a id="orga6f4136"></a>并行处理（Parallel Processing）<br /><div class="outline-text-4" id="text-orga6f4136">
<p>
<code>fork</code> ， <code>fork again</code> 和 <code>end fork</code> 三个关键词用来表示并行处理结
构。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-ab6.png
  start
  if (multiprocessor?) then (yes)
    fork
      :Treatment 1;
    fork again
      :Treatment 2;
    end fork
  else (monoproc)
    :Treatment 1;
    :Treatment 2;
  endif
  stop
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-ab6.png" alt="plantuml-quickstart-ab6.png" />
</p>
</div>
</div></li>
<li><a id="orgc550e28"></a>注解的文本样式（Notes）<br /><div class="outline-text-4" id="text-orgc550e28">
<p>
注解里的文本样式是通过 <a href="http://www.plantuml.com/creole.html">Creole wiki syntax</a> 来实现的。关于<a href="http://en.wikipedia.org/wiki/Creole_(markup)">Creole引擎</a>,
大家可以参考维基百科上的介绍。
</p>

<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-ab7.png
  start
  :fool;
  note left: This is a note
  :foo2;
  note right
    This note is on serveral
    //lines// and can
    contain &lt;b&gt;HTML&lt;/b&gt;
    ====
    * Calling the method ""foo()"" is prohibited
  end note
  stop
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-ab7.png" alt="plantuml-quickstart-ab7.png" />
</p>
</div>
</div></li>
<li><a id="org956674a"></a>颜色（Color）<br /><div class="outline-text-4" id="text-org956674a">
<p>
为活动元素指定背景色可以直接在活动开始标记 <code>:</code> 前加上颜色描述符：
</p>
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-ab8.png
  start
  #purple:starting progress;
  :reading configuration files
  These files must do be edited at this point;
  #00AAAA:ending of the process;
  stop
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-ab8.png" alt="plantuml-quickstart-ab8.png" />
</p>
</div>
</div></li>
<li><a id="org45b0c44"></a>完整示例（Complete Example）<br /><div class="outline-text-4" id="text-org45b0c44">
<pre class="example">
#+BEGIN_SRC plantuml :file ../img/plantuml-quickstart-ab9.png
  start
  :ClickServlet.handleRequest();
  :new page;
  if (Page.onSecurityCheck) then (true)
    :(Page.onInit();
    if (isForward?) then (no)
      :Process controls;
      if (continue processing?) then (no)
        stop
      endif

      if (isPost?) then (yes)
        :Page.onPost();
      else (no)
        :Page.onGet();
      endif
      :Page.onRender();
    endif
  else (false)
  endif

  if (do redirect?) then (yes)
    :redirect process;
  else
    if (do forward?) then (yes)
      :Forward request;
    else (no)
      :Render page template;
    endif
  endif

  stop
#+END_SRC
</pre>


<div class="figure">
<p><img src="../img/plantuml-quickstart-ab9.png" alt="plantuml-quickstart-ab9.png" />
</p>
</div>
</div></li></ul></li></ul>
</div>
</div>
<div id="postamble" class="status">

</div><!-- postamble end -->

</div>

<div class="callout-quote animation is-animated">
<div id="disqus_thread" class="container"></div>
<script type="text/javascript">
    var disqus_shortname = '3zso';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<!--
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a> -->
</div>


 <div style="clear:both;"></div>
  
 <!-- Latest compiled and minified CSS -->
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  
 <!-- Optional theme
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
      -->
 <!-- Latest compiled and minified JavaScript -->
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  
 <link rel='stylesheet' id='ep2014-styles-css'  href='/css/poole.css' type='text/css' media='all' />
 <link rel='stylesheet' id='ep2014-styles-css'  href='/css/custom.css' type='text/css' media='all' />
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"> 
 <script type='text/javascript' src='http://3zso.com/js/jquery/jquery.js'></script>
 <script type='text/javascript' src='http://3zso.com/js/jquery/jquery-migrate.min.js'></script>

<style type="text/css">
.container { width: auto;}
</style>

  
 </div><!-- content2 end -->
     <footer role="contentinfo">
      <div class="content text-center">
        <small class="copyright">&copy;2017 Zhong Lizhi. Contents licensed under
          <a rel="license" target="ablank" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND 4.0</a> with attribution required.
        </small>
      </div>
    </footer>


<div style="display:none">
</div>
</body>
</html>
